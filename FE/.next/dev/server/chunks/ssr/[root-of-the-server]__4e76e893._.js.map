{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/khach2/electric-car/FE/lib/cart-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\r\nimport type { Product } from \"./mock-data\"\r\n\r\nexport interface CartItem {\r\n  product: Product\r\n  quantity: number\r\n  selectedColor: string\r\n}\r\n\r\ninterface CartContextType {\r\n  items: CartItem[]\r\n  addItem: (product: Product, quantity: number, color: string) => void\r\n  removeItem: (productId: string) => void\r\n  updateQuantity: (productId: string, quantity: number) => void\r\n  clearCart: () => void\r\n  total: number\r\n  itemCount: number\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined)\r\n\r\nexport function CartProvider({ children }: { children: ReactNode }) {\r\n  const [items, setItems] = useState<CartItem[]>([])\r\n\r\n  // Load cart from localStorage on mount\r\n  useEffect(() => {\r\n    const savedCart = localStorage.getItem(\"cart\")\r\n    if (savedCart) {\r\n      setItems(JSON.parse(savedCart))\r\n    }\r\n  }, [])\r\n\r\n  // Save cart to localStorage on change\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(items))\r\n  }, [items])\r\n\r\n  const addItem = (product: Product, quantity: number, color: string) => {\r\n    setItems((prev) => {\r\n      const existingItem = prev.find((item) => item.product.id === product.id && item.selectedColor === color)\r\n\r\n      if (existingItem) {\r\n        return prev.map((item) =>\r\n          item.product.id === product.id && item.selectedColor === color\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item,\r\n        )\r\n      }\r\n\r\n      return [...prev, { product, quantity, selectedColor: color }]\r\n    })\r\n  }\r\n\r\n  const removeItem = (productId: string) => {\r\n    setItems((prev) => prev.filter((item) => item.product.id !== productId))\r\n  }\r\n\r\n  const updateQuantity = (productId: string, quantity: number) => {\r\n    if (quantity <= 0) {\r\n      removeItem(productId)\r\n      return\r\n    }\r\n\r\n    setItems((prev) => prev.map((item) => (item.product.id === productId ? { ...item, quantity } : item)))\r\n  }\r\n\r\n  const clearCart = () => {\r\n    setItems([])\r\n  }\r\n\r\n  const total = items.reduce((sum, item) => sum + item.product.price * item.quantity, 0)\r\n  const itemCount = items.reduce((sum, item) => sum + item.quantity, 0)\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        items,\r\n        addItem,\r\n        removeItem,\r\n        updateQuantity,\r\n        clearCart,\r\n        total,\r\n        itemCount,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useCart() {\r\n  const context = useContext(CartContext)\r\n  if (!context) {\r\n    throw new Error(\"useCart must be used within a CartProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAqBA,MAAM,4BAAc,IAAA,qVAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAa,EAAE;IAEjD,uCAAuC;IACvC,IAAA,iVAAS,EAAC;QACR,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,SAAS,KAAK,KAAK,CAAC;QACtB;IACF,GAAG,EAAE;IAEL,sCAAsC;IACtC,IAAA,iVAAS,EAAC;QACR,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;IAC9C,GAAG;QAAC;KAAM;IAEV,MAAM,UAAU,CAAC,SAAkB,UAAkB;QACnD,SAAS,CAAC;YACR,MAAM,eAAe,KAAK,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,EAAE,KAAK,QAAQ,EAAE,IAAI,KAAK,aAAa,KAAK;YAElG,IAAI,cAAc;gBAChB,OAAO,KAAK,GAAG,CAAC,CAAC,OACf,KAAK,OAAO,CAAC,EAAE,KAAK,QAAQ,EAAE,IAAI,KAAK,aAAa,KAAK,QACrD;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAS,IAC9C;YAER;YAEA,OAAO;mBAAI;gBAAM;oBAAE;oBAAS;oBAAU,eAAe;gBAAM;aAAE;QAC/D;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,EAAE,KAAK;IAC/D;IAEA,MAAM,iBAAiB,CAAC,WAAmB;QACzC,IAAI,YAAY,GAAG;YACjB,WAAW;YACX;QACF;QAEA,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,OAAU,KAAK,OAAO,CAAC,EAAE,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI;IACjG;IAEA,MAAM,YAAY;QAChB,SAAS,EAAE;IACb;IAEA,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,OAAO,CAAC,KAAK,GAAG,KAAK,QAAQ,EAAE;IACpF,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAEnE,qBACE,6WAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,kVAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}